// ******************************************************************
// Third party imports
// ******************************************************************
var _ = require('underscore');
var latice = require('./latice');
var physics = require('./physics')
// ******************************************************************

// ******************************************************************
// MAX 13 levels or app will die!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! *
// ******************************************************************
var atomLatice = new physics.Atom(0, 0, 0, 'N', 13);
// ******************************************************************


// ******************************************************************
// Reduce recursive nesting to flat structure
// ******************************************************************
var flatLatice = latice.flatten(atomLatice);
// ******************************************************************

// ******************************************************************
// Remove atoms occupying same lateral coordinates
// ******************************************************************
var uniqueAtoms = _.uniq(flatLatice, false, function(a){
	return 'x' + a.coordinates.x + 
		   'y' + a.coordinates.y + 
		   'z' + a.coordinates.z;
});
// ******************************************************************


// ******************************************************************
// Output this shit
// ******************************************************************
console.log('type', 'x', 'y', 'z');

for(var i = 0; i < uniqueAtoms.length; i++){
	console.log(
		uniqueAtoms[i].atomType, 
		uniqueAtoms[i].coordinates.x,
		uniqueAtoms[i].coordinates.y,
		uniqueAtoms[i].coordinates.z
	);
}
// ******************************************************************